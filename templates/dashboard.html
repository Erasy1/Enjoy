<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ENJOY - Dashboard</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pontano+Sans&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
  <div class="layout">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar" aria-label="Sidebar">
      <div class="brandRow">
        <div class="brandBadge" aria-hidden="true">
          <span class="brandBadgeText">Ej</span>
        </div>
      </div>

      <nav class="nav" aria-label="Main navigation">
        <a class="navItem {{ 'active' if active_page=='home' else '' }}" href="{{ url_for('dashboard') }}">
          <span class="navIcon">ğŸ </span><span class="navLabel">Home</span>
        </a>

        <a class="navItem {{ 'active' if active_page=='movies' else '' }}" href="{{ url_for('movies_page') }}">
          <span class="navIcon">ğŸ¬</span><span class="navLabel">Movies</span>
        </a>

        <a class="navItem {{ 'active' if active_page=='series' else '' }}" href="{{ url_for('series_page') }}">
          <span class="navIcon">ğŸ“º</span><span class="navLabel">Series</span>
        </a>

        <a class="navItem {{ 'active' if active_page=='my_list' else '' }}" href="{{ url_for('my_list_page') }}">
          <span class="navIcon">ğŸ§¾</span><span class="navLabel">My list</span>
        </a>

        <a class="navItem {{ 'active' if active_page=='analytics' else '' }}" href="{{ url_for('analytics') }}">
          <span class="navIcon">ğŸ“Š</span><span class="navLabel">Analytics</span>
        </a>

        <a class="navItem {{ 'active' if active_page=='assistant' else '' }}" href="{{ url_for('assistant_page_v2') }}">
          <span class="navIcon">ğŸ¤–</span><span class="navLabel">AI Assistant</span>


        <div class="navDivider"></div>
      </nav>

      <div class="sideBottom">
        <a class="navItem {{ 'active' if active_page=='account' else '' }}" href="{{ url_for('settings_page') }}">
          <span class="navIcon">ğŸ‘¤</span><span class="navLabel">Account</span>
        </a>

        <a class="sideBtn logout" href="{{ url_for('logout') }}">
          â‹ <span class="navLabel">Logout</span>
        </a>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <!-- TOPBAR -->
      <header class="topbar">
        <button class="sidebarToggle" id="sidebarToggle" type="button" aria-label="Toggle sidebar" title="Toggle sidebar">
          <span></span><span></span>
        </button>

        <div class="topActions">
          <button class="topIcon" id="btnSearch" type="button" aria-label="Search" title="Search">ğŸ”</button>
          <button class="topIcon" id="btnNotif" type="button" aria-label="Notifications" title="Notifications">ğŸ””</button>

          <button class="profile" id="btnProfile" type="button" aria-label="Profile" title="Profile">
            <span class="avatar">ğŸ‘¤</span>
            <span class="nick">{{ nickname }}</span>
          </button>
        </div>
      </header>

      <!-- Releases + New Series -->
      <section class="hero">
        <!-- LEFT: Releases carousel -->
        <div class="heroLeft">
          <div class="blockHeader">
            <div class="sectionTitle">Releases</div>
            <div class="arrows">
              <button class="arrow" type="button" data-target="relTrack" data-dir="-1" aria-label="Left">â®</button>
              <button class="arrow" type="button" data-target="relTrack" data-dir="1" aria-label="Right">â¯</button>
            </div>
          </div>
      
          <div class="trackWrap">
            <div class="track trackReleases" id="relTrack">
              <a class="card releaseCard" href="#"><span>Loading...</span></a>
            </div>
          </div>
        </div>
      
        <!-- RIGHT: Selected release info -->
        <aside class="heroRight" id="releaseInfo">
          <div class="sectionTitle right">Release Info</div>
      
          <div class="seriesName" id="relName">Select a release</div>
          <div class="seriesMeta" id="relMeta">â€”</div>
          <p class="seriesDesc" id="relDesc">â€”</p>
      
          <div class="seriesBtns">
            <button class="pill" id="relMore" type="button">More Info</button>
            <button class="pill" id="relArchive" type="button">Archive</button>
          </div>
        </aside>
      </section>      
        

      <!--  NEW USER: Recommendations for You  -->
      {% if show_recommendations_block %}
      <section class="block" id="recBlock">
        <div class="blockHeader">
          <div class="sectionTitle">Recommendations for You</div>
          <div class="arrows">
            <button class="arrow" type="button" data-target="recTrack" data-dir="-1" aria-label="Left">â®</button>
            <button class="arrow" type="button" data-target="recTrack" data-dir="1" aria-label="Right">â¯</button>
          </div>
        </div>

        <div class="trackWrap">
          <div class="track" id="recTrack">
            <!-- JS Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¸Ğ· /api/recommendations -->
            <div class="card skeleton"><span>Loading...</span></div>
            <div class="card skeleton"><span>Loading...</span></div>
            <div class="card skeleton"><span>Loading...</span></div>
          </div>
        </div>
      </section>
      {% endif %}

      <!-- Continue Watching  -->
      {% if show_continue_watching %}
      <section class="block">
        <div class="blockHeader">
          <div class="sectionTitle">Continue Watching</div>
          <div class="arrows">
            <button class="arrow" type="button" data-target="cwTrack" data-dir="-1" aria-label="Left">â®</button>
            <button class="arrow" type="button" data-target="cwTrack" data-dir="1" aria-label="Right">â¯</button>
          </div>
        </div>
        <div class="track" id="cwTrack"></div>
      </section>
      {% endif %}

      <!-- Trending Now -->
      <section class="block">
        <div class="blockHeader">
          <div class="sectionTitle">The trending Now</div>
          <div class="arrows">
            <button class="arrow" type="button" data-target="trTrack" data-dir="-1" aria-label="Left">â®</button>
            <button class="arrow" type="button" data-target="trTrack" data-dir="1" aria-label="Right">â¯</button>
          </div>
        </div>
   
        <div class="trackWrap">
          <div class="track" id="trTrack">
            <a class="card" href="#"><img src="{{ url_for('static', filename='tr1.jpg') }}" alt=""><span>Trending 1</span></a>
            <a class="card" href="#"><img src="{{ url_for('static', filename='tr2.jpg') }}" alt=""><span>Trending 2</span></a>
            <a class="card" href="#"><img src="{{ url_for('static', filename='tr3.jpg') }}" alt=""><span>Trending 3</span></a>
            <a class="card" href="#"><img src="{{ url_for('static', filename='tr4.jpg') }}" alt=""><span>Trending 4</span></a>
            <a class="card" href="#"><img src="{{ url_for('static', filename='tr5.jpg') }}" alt=""><span>Trending 5</span></a>
          </div>
        </div>
      </section>
      <!-- Random Film of the day (after Trending Now) -->
      <section class="randomDay" id="randomDaySection">
        <div class="randomDayHead">
          <div class="randomDayTitleH2">Random film for you</div>
      
          <button class="randomDayBtn" id="randomDayBtn" type="button">Get random</button>
        </div>
      
        <div class="randomDayCard hidden" id="randomDayCard">
          <div class="randomDayPosterWrap">
            <img id="randomDayPoster" class="randomDayPoster" alt="Poster" />
          </div>
      
          <div class="randomDayInfo">
            <div class="randomDayTopRow">
              <div class="randomDayName" id="randomDayName">â€”</div>
              <span class="randomDayBadge" id="randomDayBadge">â€”</span>
            </div>
      
            <div class="randomDayMeta">
              <span id="randomDayDate">â€”</span>
              <span class="dot">â€¢</span>
              <span id="randomDayVote">â­ 0.0</span>
            </div>
      
            <p class="randomDayOverview" id="randomDayOverview">Click â€œGet randomâ€ to show a movie or series.</p>
      
            <button id="randomDayMore" class="randomDayLinkBtn" type="button">More Info</button>
          </div>
        </div>
      </section>

    </main>
  </div>
  
  <!-- Random Details Modal -->
<div class="rdmOverlay hidden" id="rdmOverlay" aria-hidden="true">
  <div class="rdmModal" role="dialog" aria-modal="true" aria-label="Details">
    <button class="rdmClose" id="rdmClose" type="button" aria-label="Close">Ã—</button>

    <div class="rdmGrid">
      <div class="rdmPosterWrap">
        <img id="rdmPoster" alt="Poster" />
      </div>

      <div class="rdmContent">
        <div class="rdmTrailer hidden" id="rdmTrailerContainer">
          <div class="rdmTrailerInner">
            <iframe
              id="rdmTrailerFrame"
              width="100%"
              height="420"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen>
            </iframe>
          </div>
        </div>
        
        <h3 class="rdmTitle" id="rdmTitle">â€”</h3>

        <div class="rdmMeta" id="rdmMeta">â€”</div>

        <p class="rdmOverview" id="rdmOverview">â€”</p>

        <div class="rdmActions">
          <button class="rdmBtn" id="rdmWatchBtn" type="button">â–¶ Watch</button>
          <button class="rdmBtn" id="rdmTrailerBtn" type="button">ğŸ¬ Trailer</button>
          <button class="rdmBtn" id="rdmArchiveBtn" type="button">ğŸ“Œ Archive</button>
        </div>        
      </div>
    </div>
  </div>
</div>


  <!-- MODAL: More Info -->
  <div class="modal" id="infoModal" aria-hidden="true">
    <div class="modalBackdrop" id="modalBackdrop"></div>

      <div class="modalDialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="modalClose" id="modalClose" type="button" aria-label="Close">âœ•</button>

      <div class="modalBody">
        <div class="modalPoster" id="modalPoster"></div>

        <div class="modalText">
          <div class="modalTitle" id="modalTitle">Loading...</div>
          <div class="modalMeta" id="modalMeta">â€”</div>
          <p class="modalDesc" id="modalDesc">â€”</p>
        </div>
      </div>
    </div>
  </div>

  <!--  Media Modal: Watch , Trailer -->
<div class="modal" id="mediaModal" aria-hidden="true">
  <div class="modalBackdrop" id="mediaModalBackdrop"></div>

  <div class="modalDialog" role="dialog" aria-modal="true" aria-labelledby="mediaModalTitle">
    <button class="modalClose" id="mediaModalClose" type="button" aria-label="Close">âœ•</button>

    <div class="modalBody">
      <div class="modalPoster" id="mediaModalPoster"></div>

      <!--  Trailer player (hidden by default) -->
      <div class="modalTrailer hidden" id="mediaModalTrailer"></div>


      <div class="modalText">
        <div class="modalTitle" id="mediaModalTitle">Loading...</div>
        <div class="modalMeta" id="mediaModalMeta">â€”</div>
        <p class="modalDesc" id="mediaModalDesc">â€”</p>

        <div class="seriesBtns">
          <button class="pill" id="btnWatch" type="button">â–¶ Watch</button>
          <button class="pill ghost" id="btnTrailer" type="button">ğŸ Trailer</button>
          <button class="pill ghost" id="btnArchive" type="button">ğŸ“Œ Archive</button> 

        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="searchModal" aria-hidden="true">
  <div class="modalBackdrop" id="searchBackdrop"></div>

  <div class="modalDialog" role="dialog" aria-modal="true" aria-labelledby="searchTitle">
    <button class="modalClose" id="searchClose" type="button" aria-label="Close">âœ•</button>

    <div class="modalBody" style="grid-template-columns: 1fr; gap:12px;">
      <div class="modalTitle" id="searchTitle">Search</div>

      <input id="searchInput" class="searchInput" type="text"
             placeholder="Type movie or series..." autocomplete="off" />

      <div class="trackWrap">
        <div class="track" id="searchResults"></div>
      </div>
    </div>
  </div>
</div>



<div class="profileMenu" id="profileMenu">
  <a href="{{ url_for('settings_page') }}" class="profileMenuItem">ğŸ‘¤ Account</a>
  <div class="profileMenuDivider"></div>
  <a href="{{ url_for('logout') }}" class="profileMenuItem danger">â‹ Logout</a>
</div>

<div class="modal" id="notifModal" aria-hidden="true">
  <div class="modalBackdrop" id="notifBackdrop"></div>

  <div class="modalDialog" role="dialog" aria-modal="true" aria-labelledby="notifTitle">
    <button class="modalClose" id="notifClose" type="button" aria-label="Close">âœ•</button>

    <div class="modalBody" style="grid-template-columns: 1fr;">
      <div class="modalTitle" id="notifTitle">Notifications</div>
      <div class="notifList" id="notifList">
        <div class="notifItem">No notifications yet</div>
      </div>
    </div>
  </div>
</div>


  <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
  <script src="{{ url_for('static', filename='media_modal.js') }}"></script>
  <script src="{{ url_for('static', filename='random.js') }}"></script>


  
  
</body>
</html>

